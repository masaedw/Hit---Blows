<html>
	<head>

	<title>Hit &amp Blows</title>

	<script type="text/javascript">

		function main(){

			var ans = createRnd();
			var input = window.inputBox.value;

			var hitCount  = checkHit(input,ans);
			var blowCount = checkBlow(input,ans);

			window.inputBox.value ="";
			window.output.value += printMessage(hitCount,blowCount,input);

		}

		function createRnd(){

			var baseArray = new Array(10);

			for (var i = 0; i < 10; i++){
				baseArray[i] = i;
			}


			var rndArray = new Array(4);

			for (var i = 0; i < 4; i++){

				var a = Math.floor(Math.random() * (10-i));

				rndArray[i] = baseArray[a];

				baseArray.splice(a,1);

			}


			var ans = "";

			for(var i = 0; i < 4; i++){

				ans = ans + rndArray[i];

			}

			return ans;

		}

		function checkHit(input,ans){

			var a = "";
			var b = "";
			var hitCount = 0;


			for(var i = 0; i < 4; i++){

				a = input.charAt(i);
				b = ans.charAt(i);

				if (a == b){
					hitCount++;
				}
	
			}

			return hitCount;			

		}

		function checkBlow(input,ans){

			var ans_copy = ans;

			var a = "";
			var b = "";
			var blowCount = 0;

			for(var i = 0; i < 4; i++){

				a = input.charAt(i);
				ans = ans.replace(ans.charAt(i),"");

				for(var j = 0; j < 3; j++ ){

					b = ans.charAt(j);

					if(a == b){
						blowCount++;
					}

				}

				ans = ans_copy;
	
			}

			return blowCount;

		}

		function printMessage(hitCount,blowCount,input){

			var message = "";
		
			if(hitCount == 4){

				message = "Great!"+"\n";			
			
				} else {

					message = "Your answer:"+ input +"\n"+ hitCount + "Hit," + blowCount + "blow."+"\n";
				
			}

			return message;

		}


	</script>

	</head>

	<body>

		<input type="text" id="inputBox">
		<input type="button" value="try!" onclick="main()">


		<div>
			<textarea id="output"></textarea>
		</div>

	</body>

</html>